{% extends 'layout.html' %}

{% block title %}Shopping Cart{% endblock %}

{% block content %}
    <h2>Your Shopping Cart</h2>
    {% if cart %}
        <div class="books">
            {% for book_id, book_info in cart.items() %}
                <div class="book">
                    <img src="{{ book_info.details.cover }}" alt="{{ book_info.details.title }}">
                    <h3>{{ book_info.details.title }}</h3>
                    <p>Author: {{ book_info.details.author }}</p>
                    <p>Price: RM {{ book_info.details.price }}</p>
                    <p>Genre: {{ book_info.details.genre }}</p>
                    <p>Quantity: {{ book_info.quantity }}</p>
                    <div class="cart-buttons">
                        <!-- Increase quantity -->
                        <form method="post" action="{{ url_for('add_to_cart', book_id=book_id) }}">
                            <button type="submit" class=quantity-btn>+</button>
                        </form>
                        <!-- Decrease quantity -->
                        {% if book_info.quantity > 1 %}
                        <form method="post" action="{{ url_for('remove_one_from_cart', book_id=book_id) }}">
                            <button type="submit" class=quantity-btn>-</button>
                        </form>
                        {% endif %}
                        <!-- Remove item -->
                        <form method="post" action="{{ url_for('remove_from_cart', book_id=book_id) }}">
                            <button type="submit" class="remove-btn">Remove</button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        </div>
        <!-- Checkout button -->
        <form method="post" action="{{ url_for('checkout') }}">
            <button type="submit" class="checkout-btn">Proceed to Checkout</button>
        </form>
    {% else %}
        <p>Your cart is empty.</p>
    {% endif %}
{% endblock %}
