{% extends 'layout.html' %}

{% block title %}Shopping Cart{% endblock %}

{% block content %}
    <h2>Your Shopping Cart</h2>
    {% if cart %}
        <div class="books">
            {% for book_id, book_info in cart.items() %}
                <div class="book">
                    <img src="{{ book_info.details.cover }}" alt="{{ book_info.details.title }}">
                    <h3>{{ book_info.details.title }}</h3>
                    <p>Author: {{ book_info.details.author }}</p>
                    <p>Price: RM {{ book_info.details.price }}</p>
                    <p>Genre: {{ book_info.details.genre }}</p>
                    <p>Quantity: {{ book_info.quantity }}</p>
                    <div class="cart-buttons">
                        <!-- Update the href to action if these buttons are part of a form -->
                        <form method="post" action="{{ url_for('add_to_cart', book_id=book_id) }}">
                            <button type="submit" name="change" value="increase">+</button>
                            {% if book_info.quantity > 1 %}
                                <button type="submit" name="change" value="decrease">-</button>
                            {% endif %}
                            <button type="submit" name="change" value="remove">Remove</button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        </div>
        <!-- Convert this to a button inside a form to submit the checkout action -->
        <form method="post" action="{{ url_for('checkout') }}">
            <button type="submit" class="btn btn-primary">Proceed to Checkout</button>
        </form>
    {% else %}
        <p>Your cart is empty.</p>
    {% endif %}
{% endblock %}
